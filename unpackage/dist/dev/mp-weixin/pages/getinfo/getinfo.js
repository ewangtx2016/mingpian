require("../../common/manifest.js");
require("../../common/vendor.js");
global.webpackJsonp([12],{42:function(e,t,n){"use strict";var o=a(n(1)),r=a(n(43));function a(e){return e&&e.__esModule?e:{default:e}}new o.default(r.default).$mount()},43:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(45),r=n.n(o),a=n(46),s=!1;var i=function(e){s||n(44)},u=n(0)(r.a,a.a,i,null,null);u.options.__file="..\\..\\..\\..\\xm\\uni-app\\shop\\pages\\getinfo\\getinfo.vue",u.esModule&&Object.keys(u.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),u.options.functional&&console.error("[vue-loader] getinfo.vue: functional components are not supported with templates, they should use render functions."),t.default=u.exports},44:function(e,t){},45:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=n(2);t.default={data:function(){return{}},computed:o({},(0,r.mapGetters)(["GET_CODE","GET_USERINFO"]),(0,r.mapState)(["HTTPS_URL"])),onLoad:function(e){this.type=e.type,this.cardId=e.cardId||"",this.getBy(this.cardId)},onShow:function(e){console.log("哈哈哈哈哈",e)},methods:o({},(0,r.mapMutations)(["SET_CODE"]),{getBy:function(t){var n=this,o=e.getStorageSync("CODE");return new Promise(function(r,a){e.request({url:n.HTTPS_URL+"/businessCard/bind",method:"GET",header:{Cookie:"ticket="+o.ticket},data:{cardId:""+t},success:function(t){"USER_NOT_LOGIN"===t.data.errorCode||e.navigateTo({url:"/pages/index/index"}),r(t)}})})},getuserinfo:function(t){if(t.detail.userInfo){var n=this;wx.login({success:function(o){console.log(t.detail.userInfo),e.setStorageSync("USERINFO",t.detail.userInfo),e.request({url:n.HTTPS_URL+"/businessCard/login",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{code:o.code,user:JSON.stringify(t.detail)},success:function(t){if(1===t.data.status){var r={code:o.code,tt_token:t.data.data.tt_token,ticket:t.data.data.ticket,userId:t.data.data.userId};e.setStorageSync("CODE",r),n.getBy()}}})}})}}})}}).call(t,n(3).default)},46:function(e,t,n){"use strict";var o=function(){var e=this.$createElement,t=this._self._c||e;return t("view",{staticClass:"getuserinfo"},[t("button",{attrs:{"open-type":"getUserInfo",eventid:"NHI-0"},on:{getuserinfo:this.getuserinfo}},[this._v("获取用户授权")])],1)};o._withStripped=!0;var r={render:o,staticRenderFns:[]};t.a=r}},[42]);
//# sourceMappingURL=../../.sourcemap/pages/getinfo/getinfo.js.map